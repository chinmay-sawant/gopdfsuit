// Typst benchmark with PDF/A-2b compliance
// Compile with: typst compile --pdf-standard a-2b benchmark.typ output_typst.pdf

#set document(
  title: "User Report",
  author: "Benchmark System",
  keywords: ("users", "report", "benchmark", "PDF/A-2b", "typst"),
  date: datetime.today(),
)

#set page(
  paper: "a4",
  margin: (top: 2cm, bottom: 2cm, left: 1.5cm, right: 1.5cm),
  footer: context [
    #set align(center)
    #set text(size: 8pt, fill: gray)
    Page #counter(page).display() of #counter(page).final().first() — Generated by Typst (PDF/A-2b)
  ],
)

#set text(font: "Helvetica", size: 10pt)

// Load data from JSON
#let records = json("../data.json")

// Title centered
#align(center)[
  #text(size: 18pt, weight: "bold")[User Report]
]

#v(0.5cm)

// Styled table with alternating row colors matching pdfkit format
#table(
  columns: (0.5fr, 1.5fr, 2fr, 1.5fr, 3fr),
  stroke: 0.5pt + luma(200),
  inset: 6pt,
  
  // Header row with gray background
  table.header(
    table.cell(fill: luma(230))[*ID*],
    table.cell(fill: luma(230))[*Name*],
    table.cell(fill: luma(230))[*Email*],
    table.cell(fill: luma(230))[*Role*],
    table.cell(fill: luma(230))[*Description*],
  ),
  
  // Data rows with alternating colors
  ..records.enumerate().map(((i, r)) => {
    let bg = if calc.rem(i, 2) == 1 { luma(248) } else { white }
    (
      table.cell(fill: bg)[#str(r.id)],
      table.cell(fill: bg)[#r.name],
      table.cell(fill: bg)[#r.email],
      table.cell(fill: bg)[#r.role],
      table.cell(fill: bg)[#r.desc],
    )
  }).flatten()
)

#v(1cm)

#align(center)[
  #text(size: 8pt, fill: gray)[
    PDF Standard: PDF/A-2b (ISO 19005-2:2011) — compile with `typst compile --pdf-standard a-2b`
  ]
]
